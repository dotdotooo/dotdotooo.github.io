<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">

    

    <!--icon-->
    
        <link rel="shortcut icon" type='image/x-icon' href="/favicon.ico">
    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- meta -->
    
    <title>Java数据类型转换 | 星星点点</title>
    
    

    <!--Social link-->
     
        <meta name="description" content="数据类型转换 写的东西不具有美感，得空，重构   基本类型转换12345byte a &#x3D; 127,b&#x3D;1;&#x2F;&#x2F;byte c &#x3D; a + b; &#x2F;&#x2F; 编译无法识别变量的数据类型 Required type:byte; Provided:intSystem.out.println(a + b);&#x2F;&#x2F;128 整数的数据类型默认为bytebyte d &#x3D; (byte)(a + b);  &#x2F;&#x2F;强制类型转换">
<meta property="og:type" content="article">
<meta property="og:title" content="Java数据类型转换">
<meta property="og:url" content="https://atyou.xyz/2763640352.html">
<meta property="og:site_name" content="星星点点">
<meta property="og:description" content="数据类型转换 写的东西不具有美感，得空，重构   基本类型转换12345byte a &#x3D; 127,b&#x3D;1;&#x2F;&#x2F;byte c &#x3D; a + b; &#x2F;&#x2F; 编译无法识别变量的数据类型 Required type:byte; Provided:intSystem.out.println(a + b);&#x2F;&#x2F;128 整数的数据类型默认为bytebyte d &#x3D; (byte)(a + b);  &#x2F;&#x2F;强制类型转换">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591787280112-ad644ecf-bb4f-42a1-8a47-c3a21708cfda.png#align=left&display=inline&height=60&margin=%5Bobject%20Object%5D&name=image.png&originHeight=60&originWidth=487&size=5381&status=done&style=none&width=487">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591786937129-5715d3a3-5ca6-4191-9c92-4897d2e97e86.png#align=left&display=inline&height=19&margin=%5Bobject%20Object%5D&name=image.png&originHeight=19&originWidth=211&size=1456&status=done&style=none&width=211">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591788237447-e8b2702d-67d7-4326-89f5-3dd5d8e357d2.png#align=left&display=inline&height=138&margin=%5Bobject%20Object%5D&originHeight=260&originWidth=606&size=0&status=done&style=none&width=322">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591788434502-451a2652-68ca-4064-a8d1-357a665ab4df.png#align=left&display=inline&height=168&margin=%5Bobject%20Object%5D&originHeight=346&originWidth=601&size=0&status=done&style=none&width=291">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591798049937-8dff981d-c034-4d1d-b993-278af75f1b43.png#align=left&display=inline&height=327&margin=%5Bobject%20Object%5D&originHeight=327&originWidth=598&size=0&status=done&style=none&width=598">
<meta property="article:published_time" content="2020-06-11T03:35:31.000Z">
<meta property="article:modified_time" content="2020-06-11T00:55:52.157Z">
<meta property="article:author" content="Hongdian">
<meta property="article:tag" content="Java数据类型">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2020/png/649964/1591787280112-ad644ecf-bb4f-42a1-8a47-c3a21708cfda.png#align=left&display=inline&height=60&margin=%5Bobject%20Object%5D&name=image.png&originHeight=60&originWidth=487&size=5381&status=done&style=none&width=487">
    

    <!-- feed -->
    

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-theme-cards@0.3.0/dist/css/style.min.css">
 
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-theme-cards@0.3/dist/css/github.min.css" crossorigin="anonymous" media="none" onload="this.media='all'">
    

    
        
<script src="/js/darkmode.js"></script>

    

    <!--LaTex-->
    

     

    
        
             
        
             
        
    

<meta name="generator" content="Hexo 4.2.1"></head>

    <body>
        <div id="app">
            <header class="header">
    <div class="header__left">
        
            <a href="/" class="button">
                <span class="logo__text">
                    ← 星星点点 | Home
                </span>
            </a>
        
    </div>
    <div class="header__right">
        
            <a href="javaScript:void(0);" id="btn-toggle-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </a>
        
         
            <a href="#" id="b2t" style="display: block">
                <svg class="svg-icon" viewBox="0 0 20 20" width='32' height='32' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M13.889,11.611c-0.17,0.17-0.443,0.17-0.612,0l-3.189-3.187l-3.363,3.36c-0.171,0.171-0.441,0.171-0.612,0c-0.172-0.169-0.172-0.443,0-0.611l3.667-3.669c0.17-0.17,0.445-0.172,0.614,0l3.496,3.493C14.058,11.167,14.061,11.443,13.889,11.611 M18.25,10c0,4.558-3.693,8.25-8.25,8.25c-4.557,0-8.25-3.692-8.25-8.25c0-4.557,3.693-8.25,8.25-8.25C14.557,1.75,18.25,5.443,18.25,10 M17.383,10c0-4.07-3.312-7.382-7.383-7.382S2.618,5.93,2.618,10S5.93,17.381,10,17.381S17.383,14.07,17.383,10"></path>
                </svg>
            </a>
         
    </div>
</header>


            <main class="main">
    <div class="post-title">
    <h1 class="post-title__text">
        Java数据类型转换
    </h1>
    <div class="post-title__meta">
        
            <a href="/archives/2020/06/" class="button" style="color: #808080;">
    2020-06-11
</a>
        
        
            
 
        
        
     
 

  
    </div>
</div>


    <div class="post__with-side">
        <aside class="post-side">
            <div class="post-side__toc">
                
            </div>
        </aside>
        <article class="post content-card">
            <div class="post__header">
                
                     
                
                
                    
    <div class="post__expire" id="post-expired-notify">
        <p>
            This article was last updated on <span id="expire-date"></span> days ago, the information described in the article may be outdated.
        </p>
    </div>
    <script>
        (() => {
            var update = Date.parse("2020-06-11"),
                date = new Date(),
                now = date.getTime(),
                expire = now - update,
                expire_days = Math.floor(expire/(24*3600*1000));
            if (expire_days >= 120) {
                document.querySelectorAll('#expire-date')[0].innerHTML = expire_days;
                document.querySelectorAll('#post-expired-notify')[0].style.display = 'block';
            }
        })();
    </script>

                
            </div>
            <div class="post__content">
                <div class="markdown-body">
                    <h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><blockquote>
<p>写的东西不具有美感，得空，重构</p>
</blockquote>
<p><a name="WwbJg"></a></p>
<h1 id="基本类型转换"><a href="#基本类型转换" class="headerlink" title="基本类型转换"></a>基本类型转换</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> a = <span class="number">127</span>,b=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//byte c = a + b; // 编译无法识别变量的数据类型 Required type:byte; Provided:int</span></span><br><span class="line">System.out.println(a + b);<span class="comment">//128 整数的数据类型默认为byte</span></span><br><span class="line"><span class="keyword">byte</span> d = (<span class="keyword">byte</span>)(a + b);  <span class="comment">//强制类型转换 位数多 -&gt; 位数少</span></span><br><span class="line">System.out.println(d); <span class="comment">// -128</span></span><br></pre></td></tr></table></figure>


<p><a name="mexxJ"></a></p>
<h1 id="基本数据类型和包装数据类型"><a href="#基本数据类型和包装数据类型" class="headerlink" title="基本数据类型和包装数据类型"></a>基本数据类型和包装数据类型</h1><blockquote>
<p>对原文章的逻辑做了重新梳理<br><a href="https://cloud.tencent.com/developer/article/1512392" target="_blank" rel="noopener">cloud.tencent.com/developer/article</a></p>
</blockquote>
<p><br />基本数据类-&gt;包装数据类型  叫装箱.反过来叫拆箱.<br />Java 5引入自动拆箱和装箱.  发生在编译器,错误提示在编译器.<br /><img src="https://cdn.nlark.com/yuque/0/2020/png/649964/1591787280112-ad644ecf-bb4f-42a1-8a47-c3a21708cfda.png#align=left&display=inline&height=60&margin=%5Bobject%20Object%5D&name=image.png&originHeight=60&originWidth=487&size=5381&status=done&style=none&width=487" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">自动装箱</span><br><span class="line">Integer value=<span class="number">10</span>; <span class="comment">//int直接赋值Integer合法，由编译器实现</span></span><br><span class="line">自动拆箱</span><br><span class="line"><span class="keyword">int</span> value=<span class="keyword">new</span> Integer(<span class="number">10</span>);  <span class="comment">//int value=0; new Integer(10); value指向new Integer(10)</span></span><br><span class="line"></span><br><span class="line">自动拆箱和装箱的时机</span><br><span class="line"><span class="keyword">int</span> a1 = <span class="number">1</span>;</span><br><span class="line">Integer a2 = <span class="number">1</span>;</span><br><span class="line">System.out.println(a2.equals(a1)); <span class="comment">// equals(Object obj)  Object是对象 a1自动装箱</span></span><br><span class="line">a1=a1+a2;  or  a2=a1+a2; <span class="comment">// 算术运算自动拆箱</span></span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动装箱和拆箱的实现 jdk1.8 Integer 数据类型转换valueOf(),xxValue()</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Integer</span> <span class="keyword">extends</span> <span class="title">Number</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> value; <span class="comment">//final 表示Integer对象一经构造完成，它代表的值不再变</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Integer</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//重写equals方法,比较两个Integer对象的value，来判断是否相等</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">            <span class="keyword">return</span> value == ((Integer)obj).intValue();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 内部静态类,缓存数据,保存Integer数组</span></span><br><span class="line"><span class="comment">     * low  缓存数据最小值 固定为-128</span></span><br><span class="line"><span class="comment">     * high 缓存数据最大值 默认为127.[127,Integer.MAX_VALUE - (-low) -1]</span></span><br><span class="line"><span class="comment">     * high &gt;最大值,则cache.length&gt;Integer.MAXVALUE,则溢出</span></span><br><span class="line"><span class="comment">     * cache[]保存[low,high]所对应的Integer对象，长度是high-low+1(因为有元素0，所以要加1)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> low = -<span class="number">128</span>; <span class="comment">//缓存数据最小值</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> high;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            <span class="comment">// high value may be configured by property</span></span><br><span class="line">            <span class="keyword">int</span> h = <span class="number">127</span>;</span><br><span class="line">            String integerCacheHighPropValue =</span><br><span class="line">                sun.misc.VM.getSavedProperty(<span class="string">"java.lang.Integer.IntegerCache.high"</span>);</span><br><span class="line">            <span class="keyword">if</span> (integerCacheHighPropValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> i = parseInt(integerCacheHighPropValue);</span><br><span class="line">                    i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">                    <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                    h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">                    <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            high = h;</span><br><span class="line"></span><br><span class="line">            cache = <span class="keyword">new</span> Integer[(high - low) + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> j = low;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">                cache[k] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">            <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="title">IntegerCache</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 基本数据类型-&gt;包装数据类型</span></span><br><span class="line"><span class="comment">     * 先判断i是否在[low,high]之间</span></span><br><span class="line"><span class="comment">     * Y,则复用Integer.cache[i-low].如果Integer.valueOf(3)，直接返回Integer.cache[131]</span></span><br><span class="line"><span class="comment">     * N, 调用构造方法，构造出一个新的Integer对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 包装数据类型-&gt;基本数据类型</span></span><br><span class="line"><span class="comment">     * 先判断i是否在[low,high]之间</span></span><br><span class="line"><span class="comment">     * 直接返回值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">intValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">基本数据类型和包装数据类型判等:</span><br><span class="line">Integer a1 = <span class="number">1</span>; </span><br><span class="line">Integer a2 = <span class="number">1</span>; </span><br><span class="line">Integer a3 = <span class="keyword">new</span> Integer(<span class="number">1</span>); </span><br><span class="line">System.out.println(a1 == a2); <span class="comment">//true，因为a1和a2是同一个对象,都是Integer.cache[129] </span></span><br><span class="line">System.out.println(a1 == a3);<span class="comment">//false，a3构造了一个新的对象，不同于a1,a2 </span></span><br><span class="line">System.out.println(a3.equals(a1));<span class="comment">//true，比较值</span></span><br></pre></td></tr></table></figure>

<p><br />基本数据类型缓存(常量(对象)池)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">同类型比较,数据类型在缓存范围内才发生自动装箱和拆箱</span><br><span class="line"></span><br><span class="line">Integer a1 = <span class="number">128</span>,a2 = <span class="number">128</span>;</span><br><span class="line">System.out.println(a1 == a2); <span class="comment">//false Integer 范围为[-128,127]</span></span><br><span class="line">Integer a3 = -<span class="number">128</span>,a4 = -<span class="number">128</span>;</span><br><span class="line">System.out.println(a3 == a4); <span class="comment">//true  </span></span><br><span class="line"></span><br><span class="line">Byte b1 = <span class="number">127</span>,b2 = <span class="number">127</span>;</span><br><span class="line">System.out.println(b1 == b2); <span class="comment">//true Byte 范围为[-128,127]</span></span><br><span class="line">Byte b3 = -<span class="number">128</span>,b4 = -<span class="number">128</span>;</span><br><span class="line">System.out.println(b3 == b4); <span class="comment">//true </span></span><br><span class="line"></span><br><span class="line">Long c1 = <span class="number">128L</span>,c2 = <span class="number">128L</span>;</span><br><span class="line">System.out.println(c1 == c2); <span class="comment">//false Long 范围为[-128L,127L]</span></span><br><span class="line">Long c3 = -<span class="number">128L</span>,c4 = -<span class="number">128L</span>;</span><br><span class="line">System.out.println(c3 == c4);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">Character d1 = <span class="number">128</span>,d2 = <span class="number">128</span>;</span><br><span class="line">System.out.println(d1 == d2); <span class="comment">// false Long 范围为[0,127]</span></span><br><span class="line">Character d3 = <span class="number">127</span>,d4 = <span class="number">127</span>;</span><br><span class="line">System.out.println(d3 == d4);<span class="comment">// true</span></span><br><span class="line">System.out.println(d1); <span class="comment">//  打印的是字符,如图</span></span><br><span class="line"></span><br><span class="line">Double和Float是连续不可数的.就是比较值.</span><br><span class="line"></span><br><span class="line">Boolean没有自动装箱与拆箱.</span><br><span class="line"></span><br><span class="line">不同类型比较</span><br><span class="line">Integer i = <span class="number">10</span>;</span><br><span class="line">Byte b = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// System.out.println(i == b); //Byte和Integer.两个对象无法直接比较，报错</span></span><br><span class="line">System.out.println(<span class="string">"i == b "</span> + i.equals(b)); <span class="comment">// false  包装类先比较是否是同一个类，不是的话直接返回false.</span></span><br><span class="line"><span class="keyword">int</span> ii = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">short</span> ss = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">long</span> ll = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">char</span> cc = <span class="number">128</span>;</span><br><span class="line">System.out.println(<span class="string">"ii == ss "</span> + (ii == ss)); <span class="comment">// true 基本数据类型直接比较值，值一样就可以</span></span><br><span class="line">System.out.println(<span class="string">"ii == ll "</span> + (ii == ll)); <span class="comment">// true</span></span><br><span class="line">System.out.println(<span class="string">"ii == cc "</span> + (ii == cc)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/649964/1591786937129-5715d3a3-5ca6-4191-9c92-4897d2e97e86.png#align=left&display=inline&height=19&margin=%5Bobject%20Object%5D&name=image.png&originHeight=19&originWidth=211&size=1456&status=done&style=none&width=211" alt="image.png"><br><a name="YRVqy"></a></p>
<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><blockquote>
<p>参考<a href="https://blog.csdn.net/a724888/article/details/80048782" target="_blank" rel="noopener">https://blog.csdn.net/a724888/article</a></p>
</blockquote>
<ol>
<li><p>直接赋值- 产生一个实例化对象。一个匿名对象被引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String s2=<span class="string">"aaa"</span>;<span class="comment">//直接赋值,匿名对象自动保存到字符串常量池中</span></span><br><span class="line">String s3=<span class="string">"aaa"</span>;</span><br><span class="line">System.out.println(s2==s3);<span class="comment">//true，两个对象指向同一个堆内存空间。</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/649964/1591788237447-e8b2702d-67d7-4326-89f5-3dd5d8e357d2.png#align=left&display=inline&height=138&margin=%5Bobject%20Object%5D&originHeight=260&originWidth=606&size=0&status=done&style=none&width=322" alt=""></p>
</li>
<li><p>构造方法赋值-产生两个实例化对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String s=<span class="string">"aaa"</span>;<span class="comment">//直接赋值</span></span><br><span class="line">String s1=<span class="keyword">new</span> String(<span class="string">"aaa"</span>);<span class="comment">//构造方法实例化,匿名对象将成为垃圾空间</span></span><br><span class="line">System.out.println(s==s1);<span class="comment">// false，比较地址。直接赋值自动入池。实例化new不会入池。</span></span><br><span class="line">System.out.println(s.equals(s1));<span class="comment">//true，比较内容</span></span><br><span class="line"></span><br><span class="line">String s2=<span class="keyword">new</span> String(<span class="string">"aaa"</span>).intern();<span class="comment">//实例化方法手工入池 public String intern(); s2指向池</span></span><br><span class="line">System.out.println(s==s2);<span class="comment">//true 地址</span></span><br><span class="line"></span><br><span class="line">String s3=<span class="keyword">new</span> String(<span class="string">"aaa"</span>);</span><br><span class="line">s3.intern(); <span class="comment">//s3指向new区,s3.intern()将new区的内容入池，但s3依旧指向new区</span></span><br><span class="line">System.out.println(s==s3);<span class="comment">//false</span></span><br><span class="line">String s3=<span class="keyword">new</span> String(<span class="string">"aaa"</span>); </span><br><span class="line">s3.intern();    <span class="comment">//false 地址</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/649964/1591788434502-451a2652-68ca-4064-a8d1-357a665ab4df.png#align=left&display=inline&height=168&margin=%5Bobject%20Object%5D&originHeight=346&originWidth=601&size=0&status=done&style=none&width=291" alt=""><br />由上,为避免产生垃圾,String实例化要直接赋值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">匿名对象</span><br><span class="line"><span class="keyword">null</span>.equals():运行时异常NullPointerException。可看出，匿名对象一定是开辟好堆内存空间的对象</span><br><span class="line"></span><br><span class="line">+ 连接对象-- 同时可以得出,运算时,编译期可识别常量,不可识别变量。要知道</span><br><span class="line">要知道，避免使用魔法值，+做字符串连接，用StringBuilder</span><br><span class="line">String s=<span class="string">"aaa"</span>;<span class="comment">//直接赋值</span></span><br><span class="line">String s2=<span class="string">"a"</span>+<span class="string">"a"</span>+<span class="string">"a"</span>;<span class="comment">//表达式都为常量,编译期自动处理字符串连接,s2是整体存在，不会产生内存垃圾.</span></span><br><span class="line">System.out.println(s==s2);<span class="comment">// True 地址判断，，数据加载时，值相同。</span></span><br><span class="line"></span><br><span class="line">静态常量池和运行时常量池</span><br><span class="line">String value=<span class="string">"a"</span>; String s3=<span class="string">"a"</span>+<span class="string">"a"</span>+value; <span class="comment">//表达式有变量,运行期计算，地址不一样。</span></span><br><span class="line">System.out.println(s==s3);<span class="comment">//false 地址判断  s3在静态常量池，s4在运行时常量池。</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
<p>String不可变 </p>
<p>不可变的含义： 修改数据会指向新地址.</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/649964/1591798049937-8dff981d-c034-4d1d-b993-278af75f1b43.png#align=left&display=inline&height=327&margin=%5Bobject%20Object%5D&originHeight=327&originWidth=598&size=0&status=done&style=none&width=598" alt=""><br /><br><br /><br><br />不可变的优势 –String很常用<br /><a href="https://www.cnblogs.com/cangwei22/p/10582600.html" target="_blank" rel="noopener">cnblogs.com/cangwei22/p/10582600</a></p>
<ol>
<li><p>避免一个变量改变池中的共享数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String a=<span class="string">"abc"</span>; </span><br><span class="line">String b=<span class="string">"abc"</span>;</span><br><span class="line">System.out.println(a==b); <span class="comment">//true 共用池中数据，避免产生垃圾空间。</span></span><br><span class="line"></span><br><span class="line">b=<span class="string">"a"</span>;</span><br><span class="line">System.out.println(<span class="string">"a:"</span>+a+<span class="string">"; b:"</span>+b); <span class="comment">//a:abc; b:a   b要改变值，不能直接改变池中数据，</span></span><br><span class="line"><span class="comment">//需要定义String为 final ,避免池中数据改变，影响指向池中</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>String作为HashMap的key， String的不可变保证了hash值的不可变。</p>
</li>
<li><p>String作为网络连接的参数，String的不可变性提供安全性。</p>
</li>
<li><p>String不可变，线程安全。</p>
</li>
</ol>
<p>不可变的实现<br />Jdk1.8保存字符数组private final char[] value；jdk1.9保存字节数组private final byte[] value;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">int</span>[] value=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] another=&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="comment">//value=another;    //编译报错，但真正不可变是 编译器不允许把value指向堆区另一个地址。</span></span><br><span class="line">value[<span class="number">2</span>]=<span class="number">100</span>;  </span><br><span class="line">System.out.println(Arrays.toString(value)); <span class="comment">//[1, 2, 100]</span></span><br></pre></td></tr></table></figure>

<ol>
<li>持有String对象的引用本身是可以改变的，比如可以指向其他的对象。</li>
<li>final只能保证类不可被继承，类的对象在堆内存中的地址不会被改变。</li>
<li>final修饰的char数组保证了char数组的引用不可变。但是可以通过char[0] = ‘a’来修改值。不过String内部并不提供方法来完成这一操作，所以String的不可变是基于代码封装和访问控制的。</li>
</ol>
<p><br />StringBuffer和StringBuilder</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ 连接对象，有变量运算用StringBuilder。无变量运算用String</span><br><span class="line">String a = <span class="string">"a"</span>;</span><br><span class="line">a = a + a;<span class="comment">//计算变量，运行时计算, 先把a封装成StringBuilder，调用append方法,返回toString。生成大量StringBuilder实例</span></span><br><span class="line">String a2 = <span class="string">"a"</span>+<span class="string">"a"</span>;<span class="comment">//计算无变量，编译期直接合成"aa"，直接引用"aa"，</span></span><br></pre></td></tr></table></figure>
<p>StringBuilder 和StringBuffer 继承自AbstractStringBuilder。AbstractStringBuilder定义为 char[] value，定义了字符串的基本操作：append,insert,indexof;<br />安全性：String内容不可变，相当于常量，可看作线程安全。StringBuilder线程不安全，有10%-15%的性能提升。StringBuffer加同步锁，线程安全。<br />多用StringBuilder。 <a href="https://www.cnblogs.com/jack-Leo/p/6684447.html" target="_blank" rel="noopener">StringBuilder常用方法</a></p>
<p>Java9改进了字符串（包括String、StringBuffer、StringBuilder）的实现。在Java9以前字符串采用char[]数组来保存字符，因此字符串的每个字符占2字节；而Java9的字符串采用byte[]数组再加一个encoding-flag字段来保存字符，因此字符串的每个字符只占1字节。所以Java9的字符串更加节省空间，字符串的功能方法也没有受到影响。<br />原文链接：<a href="https://blog.csdn.net/csxypr/article/details/92378336" target="_blank" rel="noopener">https://blog.csdn.net/csxypr/article/details/92378336</a><br /></p>

                </div>
            </div>
            
                
    <div class="post__license">
        <p>
            <strong>Author: </strong>Hongdian
        </p>
        <p>
            <strong>
                Permalink: 
            </strong>
            <a href="https://atyou.xyz/2763640352.html">https://atyou.xyz/2763640352.html</a>
        </p>
        
    </div>
 
            
            
                <div class="post-meta post-footer__meta">
    <p>
        最后更新于：2020-06-11
    </p>
</div> 
            
            
                <div class="post-cats post-card__cats">
    
</div> 
                <div class="post-tags post-card__tags">
    
        <a href="/tags/Java%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="post-tags__link button"># Java数据类型</a>
    
</div> 
             
        </article>
        <br>
        
            <div class="post__comment content-card">
                
    <h4 style="margin-top: 0;">Comments</h4>
    
    
    
        <div id="gitalk-container"></div>
    
    
    
    
    


            </div>
        
    </div>



    <br>
    <div class="cover">
        
            <div class="cover__menus">
                
                    <a href="/" class="cover-menu button">
                        首页
                    </a>
                    
                        <span class="separate-dot"></span>
                    
                
                    <a href="/tags/" class="cover-menu button">
                        标签
                    </a>
                    
                        <span class="separate-dot"></span>
                    
                
                    <a href="/archives/" class="cover-menu button">
                        归档
                    </a>
                    
                        <span class="separate-dot"></span>
                    
                
                    <a href="/friends/" class="cover-menu button">
                        友链
                    </a>
                    
                
            </div>
        
    </div>

</main>
<footer class="footer">
     


     
  
    
        
            <p>Copyright © 2020 <a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener">鲁ICP备20020458号</a></p>

        
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>


        </div>
        

 

 

 

  



 

 


    
    
    
    
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
        <script>
            var gitalk = new Gitalk({
                clientID: "80068e4019dceff864db",
                clientSecret: "4755b448930b8d3b3832f0a9c06625d1d7998f43",
                repo: "https://github.com/dotdotooo/dotdotooo.github.io",
                owner: "dotdotooo",
                admin: "dotdotooo",
                id: window.location.pathname,
                distractionFreeMode: false
            });
            gitalk.render('gitalk-container');
        </script>
    
    
    
    
    
    
    

    


    </body>
</html>
